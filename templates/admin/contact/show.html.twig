{% extends 'admin-base.html.twig' %}

{% block title %}Courrier | {{contact.Subject}}{% endblock %}

{% block body %}
    <div class="app-wrapper">
	    
	    <div class="app-content pt-3 p-md-3 p-lg-4">
		    <div class="container-xl">
			    
			    <div class="row g-3 mb-4 align-items-center justify-content-between">
				    <div class="col-auto">
                        {% for message in app.flashes('success') %}
                            <div class="alert alert-success">
                                {{ message }}
                            </div>
                        {% endfor %}
                        {% for message in app.flashes('error') %}
                            <div class="alert alert-success">
                                {{ message }}
                            </div>
                        {% endfor %}
			            <h1 class="app-page-title mb-0">{{ contact.Subject }} <a class="btn app-btn-secondary" href="{{ path('contact_index') }}">Retour</a></h1>
				    </div>
                </div>

                <div class="tab-content">
                    <div class="tab-pane fade show active">
                        <div class="app-card app-card-orders-table shadow-sm mb-5">
                            <div class="app-card-body">
                                <div class="table-responsive p-3">
                                    <table class="table app-table-hover m-0 text-left">
                                        <tbody>
                                            <tr class="cell">
                                                <th class="cell">
                                                    <p>
                                                        De: {{ contact.Name }} <br>
                                                        {{ contact.Email }}
                                                    </p>
                                                    <span class="cell-data">Le: {{ contact.createdAt ? contact.createdAt|date('d/m/Y') : '' }}</span>
                                                    <span class="note">A: {{ contact.createdAt ? contact.createdAt|date('H:i') : '' }}</span>
                                                </th>
                                            </tr>
                                            <tr class="cell">
                                                <td>{{ contact.Message|nl2br }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div class="container pl-3">
                                        <div class="row">
                                            <div class="mb-3">
                                                <a id="reply_btn" style="color: #fff; font-family: 'Segoe UI', Arial; letter-spacing: 0" class="btn btn-info" href="#!">RÃ©pondre</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="reply_form" class="hide">
                    <div class="app-card app-card-orders-table shadow-sm mb-5">
                        <div class="app-card-body">
                            <div class="table-responsive p-3">
                                <div class="row m-3">
                                    <div class="col">
                                        <form class="row" name="admin_response" action="{{path('admin_response', {'id': contact.id})}}" method="post" novalidate>
                                            <div class="mb-3 col-8">
                                                <textarea name="message" id="message" class="form-control" rows="20" cols="10"></textarea>
                                            </div>
                                            <div class="mb-3 col">
                                                <button type="submit" class="btn app-btn-primary">Envoyer <i class="far fa-paper-plane"></i></button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
